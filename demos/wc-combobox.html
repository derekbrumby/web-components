<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>&lt;wc-combobox&gt; demo</title>
    <link rel="stylesheet" href="./demo-base.css" />
    <script type="module" src="../src/combobox.js"></script>
    <style>
      .combobox-showcase {
        display: grid;
        gap: 1.75rem;
      }

      .combobox-grid {
        display: grid;
        gap: 1.5rem;
      }

      .combobox-stack {
        display: grid;
        gap: 0.75rem;
        align-content: start;
      }

      .combobox-note {
        margin: 0;
        font-size: 0.9rem;
        color: #475569;
        line-height: 1.6;
      }

      .status-card {
        display: grid;
        gap: 1rem;
      }

      .status-row {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.25rem;
        border-radius: 1rem;
        background: linear-gradient(135deg, rgba(79, 70, 229, 0.1), rgba(129, 140, 248, 0.12));
        box-shadow: inset 0 0 0 1px rgba(99, 102, 241, 0.15);
      }

      .status-row p {
        margin: 0;
        color: #312e81;
        font-weight: 600;
      }

      .status-label {
        margin: 0;
        color: #4338ca;
        font-size: 0.95rem;
      }

      wc-combobox[data-code-example] {
        --wc-combobox-trigger-background: rgba(255, 255, 255, 0.9);
        --wc-combobox-trigger-border: 1px solid rgba(148, 163, 184, 0.35);
        --wc-combobox-trigger-focus-ring: 0 0 0 3px rgba(129, 140, 248, 0.3);
        --wc-combobox-panel-background: rgba(255, 255, 255, 0.98);
        --wc-combobox-panel-border: 1px solid rgba(129, 140, 248, 0.18);
        --wc-combobox-panel-shadow: 0 32px 64px -36px rgba(79, 70, 229, 0.45);
        --wc-combobox-option-highlighted-background: rgba(99, 102, 241, 0.18);
        --wc-combobox-option-highlighted-color: #1e1b4b;
        --wc-combobox-option-indicator-color: #4f46e5;
        --wc-combobox-group-label-color: rgba(79, 70, 229, 0.8);
      }

      .status-row wc-combobox {
        --wc-combobox-width: 180px;
      }

      .status-row wc-combobox::part(trigger) {
        justify-content: flex-start;
      }

      .status-row wc-combobox::part(label) {
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <main>
      <section>
        <header>
          <h2>&lt;wc-combobox&gt;</h2>
          <p>
            Searchable selection widget with grouping, keyboard navigation, pointer-friendly highlighting, and zero dependencies.
            Integrates seamlessly with form flows or command palette-style experiences.
          </p>
        </header>

        <div class="combobox-showcase">
          <div class="example-card">
            <h3>Framework selector</h3>
            <div class="combobox-grid">
              <div class="combobox-stack">
                <label for="framework-combobox" style="font-weight: 600; color: #312e81;">Pick your framework</label>
                <wc-combobox id="framework-combobox" placeholder="Select framework…" data-code-example>
                  <wc-combobox-group label="Frameworks">
                    <wc-combobox-option value="next.js">Next.js</wc-combobox-option>
                    <wc-combobox-option value="sveltekit">SvelteKit</wc-combobox-option>
                    <wc-combobox-option value="nuxt.js">Nuxt.js</wc-combobox-option>
                    <wc-combobox-option value="remix">Remix</wc-combobox-option>
                    <wc-combobox-option value="astro">Astro</wc-combobox-option>
                  </wc-combobox-group>
                </wc-combobox>
                <p class="combobox-note">
                  Use <kbd>Arrow keys</kbd> to highlight, start typing to filter, and press <kbd>Enter</kbd> to confirm a choice. Selecting an
                  active item again clears the value.
                </p>
              </div>
              <div>
                <h4>Recent events</h4>
                <pre id="framework-log" class="log">Interact with the combobox to see emitted events.</pre>
              </div>
            </div>
          </div>

          <div class="example-card status-card">
            <h3>Status updater</h3>
            <div class="status-row">
              <p>Changelog redesign</p>
              <wc-combobox id="status-combobox" placeholder="+ Set status" data-code-example>
                <wc-combobox-option value="backlog">Backlog</wc-combobox-option>
                <wc-combobox-option value="todo">Todo</wc-combobox-option>
                <wc-combobox-option value="in-progress" text-value="in progress">In progress</wc-combobox-option>
                <wc-combobox-option value="done">Done</wc-combobox-option>
                <wc-combobox-option value="canceled">Canceled</wc-combobox-option>
              </wc-combobox>
            </div>
            <p class="status-label" id="status-output">No status selected yet.</p>
          </div>
        </div>
      </section>
    </main>

    <script>
      const frameworkCombobox = document.getElementById('framework-combobox');
      const frameworkLog = document.getElementById('framework-log');
      if (frameworkCombobox && frameworkLog) {
        const lines = [];
        const writeLog = () => {
          frameworkLog.textContent = lines.slice(-5).join('\n') || 'Interact with the combobox to see emitted events.';
        };
        frameworkCombobox.addEventListener('wc-combobox-toggle', (event) => {
          lines.push(event.detail?.open ? 'Panel opened.' : 'Panel closed.');
          writeLog();
        });
        frameworkCombobox.addEventListener('wc-combobox-change', (event) => {
          const value = event.detail?.value || '(cleared)';
          lines.push(`Value changed → ${value}`);
          writeLog();
        });
        writeLog();
      }

      const statusCombobox = document.getElementById('status-combobox');
      const statusOutput = document.getElementById('status-output');
      if (statusCombobox && statusOutput) {
        const statusLabels = new Map([
          ['backlog', 'Backlog'],
          ['todo', 'Todo'],
          ['in-progress', 'In progress'],
          ['done', 'Done'],
          ['canceled', 'Canceled'],
        ]);
        statusCombobox.addEventListener('wc-combobox-change', (event) => {
          const value = event.detail?.value;
          if (!value) {
            statusOutput.textContent = 'No status selected yet.';
            return;
          }
          const label = statusLabels.get(value) ?? value;
          statusOutput.textContent = `Status set to ${label}.`;
        });
      }
    </script>
    <script type="module" src="./demo-code-blocks.js"></script>
  </body>
</html>
