<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>&lt;wc-date-picker&gt; demo</title>
    <link rel="stylesheet" href="./demo-base.css" />
    <script type="module" src="../src/date-picker.js"></script>
    <style>
      .example-grid {
        display: grid;
        gap: 2rem;
      }

      @media (min-width: 720px) {
        .example-grid.two-column {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      .example-card {
        display: grid;
        gap: 1.25rem;
        padding: 1.75rem;
        border-radius: 1.25rem;
        background: var(--demo-card-background, rgba(255, 255, 255, 0.62));
        box-shadow: 0 24px 40px -32px rgba(15, 23, 42, 0.45);
      }

      .example-card h2 {
        margin: 0;
        font-size: 1.35rem;
        letter-spacing: -0.015em;
      }

      .example-card p {
        margin: 0;
        color: rgba(71, 85, 105, 0.85);
      }

      .event-log {
        font-size: 0.85rem;
        color: rgba(30, 64, 175, 0.9);
        background: rgba(191, 219, 254, 0.35);
        border-radius: 0.75rem;
        padding: 0.6rem 0.85rem;
      }

      .date-picker-compact {
        --wc-date-picker-background: rgba(15, 23, 42, 0.95);
        --wc-date-picker-border-color: rgba(148, 163, 184, 0.3);
        --wc-date-picker-shadow: 0 38px 68px -36px rgba(15, 23, 42, 0.75);
        --wc-date-picker-accent: rgb(59, 130, 246);
        --wc-date-picker-accent-soft: rgba(59, 130, 246, 0.18);
        --wc-date-picker-muted: rgba(148, 163, 184, 0.9);
        color: #e2e8f0;
      }

      .date-picker-compact [part="trigger"] {
        min-inline-size: 15rem;
        background: rgba(15, 23, 42, 0.9);
        border-color: rgba(148, 163, 184, 0.35);
        color: inherit;
      }

      .date-picker-compact [part="panel"] {
        grid-template-columns: 1fr;
      }
    </style>
  </head>
  <body>
    <main class="example-grid two-column">
      <section class="example-card">
        <div>
          <h2>Book a stay</h2>
          <p>Select your arrival date. Dates before today are unavailable.</p>
        </div>
        <wc-date-picker id="single-date"></wc-date-picker>
        <div class="event-log" data-log="single" aria-live="polite">Waiting for a date…</div>
      </section>

      <section class="example-card">
        <div>
          <h2>Analytics range</h2>
          <p>Use presets or pick custom dates to filter your dashboard.</p>
        </div>
        <wc-date-picker id="range-date" mode="range" value="2024-04-01..2024-04-14"></wc-date-picker>
        <div class="event-log" data-log="range" aria-live="polite">Waiting for a range…</div>
      </section>

      <section class="example-card" style="grid-column: span 2;">
        <div>
          <h2>Dark panel, no presets</h2>
          <p>A compact configuration that hides the preset list and uses a custom palette.</p>
        </div>
        <wc-date-picker
          id="compact"
          class="date-picker-compact"
          mode="range"
          hide-presets
          first-day-of-week="1"
          placeholder="Select campaign window"
        ></wc-date-picker>
      </section>
    </main>

    <script type="module">
      const formatter = new Intl.DateTimeFormat(undefined, { dateStyle: 'medium' });

      const toLocalISODate = (date) => {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      };

      const parseISODate = (value) => {
        if (!value) return null;
        const [year, month, day] = value.split('-').map((part) => Number.parseInt(part, 10));
        if (!Number.isFinite(year) || !Number.isFinite(month) || !Number.isFinite(day)) return null;
        return new Date(year, month - 1, day);
      };

      const formatRange = (start, end) => {
        if (!start) return '';
        if (!end) return formatter.format(start);
        return `${formatter.format(start)} – ${formatter.format(end)}`;
      };

      const singlePicker = document.querySelector('#single-date');
      const singleLog = document.querySelector('[data-log="single"]');
      const todayIso = toLocalISODate(new Date());
      singlePicker.setAttribute('min', todayIso);
      singlePicker.addEventListener('date-change', (event) => {
        const { start } = event.detail;
        singleLog.textContent = start ? `Arriving on ${formatRange(start, null)}` : 'Waiting for a date…';
      });

      const rangePicker = document.querySelector('#range-date');
      const rangeLog = document.querySelector('[data-log="range"]');
      const initialRange = rangePicker.value.split('..');
      if (initialRange[0]) {
        const start = parseISODate(initialRange[0]);
        const end = initialRange[1] ? parseISODate(initialRange[1]) : start;
        rangeLog.textContent = start ? `Showing ${formatRange(start, end ?? start)}` : 'Waiting for a range…';
      }
      rangePicker.addEventListener('date-change', (event) => {
        const { start, end } = event.detail;
        rangeLog.textContent = start
          ? `Showing ${formatRange(start, end ?? start)}`
          : 'Waiting for a range…';
      });
    </script>
  </body>
</html>
